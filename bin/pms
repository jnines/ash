#!/bin/bash
vpnip=$(curl -s ash.lan:8000/v1/publicip/ip | sed -e 's/{"ip":"//' -e 's/\..*//' )
stream=$(curl -s -H "accept: application/json"  http://10.10.10.8:32400/status/sessions)
size=$(jq '.MediaContainer.size' <<< "$stream")
sTitle=$(jq '.MediaContainer.Metadata[0].grandparentTitle' <<< "$stream")
title=$(jq '.MediaContainer.Metadata[0].title' <<< "$stream")

if [[ "${size}" == "0" ]]; then
    echo "Nothing Playing"
    echo "${vpnip}"
elif [[ "${sTitle}" == null ]]; then
    echo Playing : "${title}" | tr -d '"'
    echo "${vpnip}"
else
    echo Playing : "${sTitle}": "${title}" | tr -d '"'
    echo "${vpnip}"
fi

/usr/bin/docker compose version
echo "Docker Compose Newest $(/bin/cat /home/jason/dcversion.txt)"